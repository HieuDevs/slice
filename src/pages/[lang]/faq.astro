---
import Layout from "../../layouts/Layout.astro";
import {
  languages,
  useTranslations,
  getLocalizedPath,
  type Language,
} from "../../i18n";

export const prerender = true;

export function getStaticPaths() {
  return Object.keys(languages).map((lang) => ({
    params: { lang },
  }));
}

// Get lang from URL params (SSG-safe, no headers needed)
const { lang } = Astro.params as { lang: Language };
const t = useTranslations(lang);

const faqs = [
  {
    question: "What is Slice and what do you do?",
    answer:
      "Slice is a startup focused on building innovative mobile and web applications that solve real-world problems. We combine cutting-edge technology with thoughtful design to create products that users love.",
  },
  {
    question: "How can I get started with your products?",
    answer:
      "Getting started is easy! Simply sign up on our platform, and you'll have access to all our tools and features. We offer a free tier so you can explore before committing to a paid plan.",
  },
  {
    question: "Do you offer custom development services?",
    answer:
      "Yes! We work with businesses of all sizes to build custom applications tailored to their specific needs. Contact us to discuss your project and get a personalized quote.",
  },
  {
    question: "What technologies do you use?",
    answer:
      "We use modern, battle-tested technologies including React, React Native, Node.js, and cloud services like AWS and Google Cloud. We choose the best tools for each project to ensure optimal performance and scalability.",
  },
  {
    question: "How do you ensure the security of your applications?",
    answer:
      "Security is built into every layer of our development process. We follow industry best practices, conduct regular security audits, and implement encryption for all sensitive data. Your security is our top priority.",
  },
  {
    question: "What kind of support do you provide?",
    answer:
      "We offer 24/7 customer support through multiple channels including email, chat, and phone. Our dedicated support team is always ready to help you with any questions or issues.",
  },
  {
    question: "Can I request new features?",
    answer:
      "Absolutely! We love hearing from our users. You can submit feature requests through our feedback portal, and our product team reviews every suggestion to prioritize our roadmap.",
  },
  {
    question: "Do you have a mobile app?",
    answer:
      "Yes, we have native mobile apps available for both iOS and Android. You can download them from the App Store or Google Play Store to access our services on the go.",
  },
];
---

<Layout
  title="FAQ - Slice"
  currentPath={getLocalizedPath("/faq", lang)}
  lang={lang}
>
  <section
    class="py-24 bg-linear-to-b from-cream-100 to-cream-50 dark:from-dark-900 dark:to-dark-950 relative overflow-hidden"
  >
    <div
      class="absolute top-0 left-1/4 w-96 h-96 bg-slice-400/10 rounded-full blur-3xl"
    >
    </div>
    <div
      class="absolute bottom-0 right-1/4 w-80 h-80 bg-purple-400/10 rounded-full blur-3xl"
    >
    </div>

    <div class="relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <div
          class="inline-flex items-center gap-2 px-4 py-2 bg-slice-100 dark:bg-slice-900/30 rounded-full text-slice-700 dark:text-slice-400 font-medium text-sm mb-6 opacity-0 animate-fade-in"
        >
          <svg
            class="w-4 h-4"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
            ></path>
          </svg>
          {t("faq.badge")}
        </div>
        <h1
          class="section-title mb-6 opacity-0 animate-slide-up animation-delay-100"
        >
          {t("faq.title")}
          <span class="gradient-text">{t("faq.titleHighlight")}</span>
        </h1>
        <p
          class="section-subtitle mx-auto opacity-0 animate-slide-up animation-delay-200"
        >
          {t("faq.subtitle")}
        </p>
      </div>

      <div class="space-y-4">
        {
          faqs.map((faq, index) => (
            <div
              class="faq-item bg-white dark:bg-dark-800 rounded-2xl shadow-card overflow-hidden opacity-0 animate-slide-up"
              style={`animation-delay: ${(index + 3) * 50}ms`}
            >
              <button
                class="faq-trigger w-full px-6 py-5 text-left flex items-center justify-between gap-4 hover:bg-cream-50 dark:hover:bg-dark-700 transition-colors"
                aria-expanded="false"
              >
                <span class="font-display font-semibold text-lg text-dark-900 dark:text-cream-100">
                  {faq.question}
                </span>
                <span class="faq-icon w-10 h-10 bg-cream-100 dark:bg-dark-700 rounded-xl flex items-center justify-center shrink-0 transition-all duration-300">
                  <svg
                    class="w-5 h-5 text-dark-500 dark:text-dark-400 transition-transform duration-300"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M19 9l-7 7-7-7"
                    />
                  </svg>
                </span>
              </button>
              <div class="faq-content hidden">
                <div class="px-6 pb-5 pt-0">
                  <p class="text-dark-500 dark:text-dark-400 leading-relaxed">
                    {faq.answer}
                  </p>
                </div>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <section class="py-20 bg-cream-50 dark:bg-dark-950">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div
        class="bg-linear-to-br from-dark-900 to-dark-950 rounded-3xl p-12 text-center relative overflow-hidden"
      >
        <div
          class="absolute top-0 left-0 w-64 h-64 bg-slice-500/20 rounded-full blur-3xl"
        >
        </div>
        <div
          class="absolute bottom-0 right-0 w-48 h-48 bg-purple-500/20 rounded-full blur-3xl"
        >
        </div>

        <div class="relative">
          <div
            class="w-16 h-16 bg-slice-500 rounded-2xl flex items-center justify-center mx-auto mb-6"
          >
            <svg
              class="w-8 h-8 text-white"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
              ></path>
            </svg>
          </div>
          <h3 class="font-display text-3xl font-bold text-white mb-4">
            {t("faq.cta.title")}
          </h3>
          <p class="text-dark-300 mb-8 max-w-md mx-auto">
            {t("faq.cta.description")}
          </p>
          <div class="flex flex-wrap justify-center gap-4">
            <a href="mailto:support@slice.app" class="btn-primary">
              <svg
                class="w-5 h-5 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                ></path>
              </svg>
              {t("faq.cta.email")}
            </a>
            <a
              href="#"
              class="inline-flex items-center justify-center px-6 py-3 border-2 border-white/30 text-white font-medium rounded-full hover:bg-white/10 transition-all duration-300"
            >
              <svg
                class="w-5 h-5 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
                ></path>
              </svg>
              {t("faq.cta.chat")}
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
</Layout>

<script>
  document.querySelectorAll(".faq-trigger").forEach((trigger) => {
    trigger.addEventListener("click", () => {
      const item = trigger.closest(".faq-item");
      const content = item?.querySelector(".faq-content");
      const icon = trigger.querySelector(".faq-icon svg");
      const isExpanded = trigger.getAttribute("aria-expanded") === "true";

      document.querySelectorAll(".faq-item").forEach((otherItem) => {
        if (otherItem !== item) {
          const otherContent = otherItem.querySelector(".faq-content");
          const otherTrigger = otherItem.querySelector(".faq-trigger");
          const otherIcon = otherTrigger?.querySelector(".faq-icon svg");

          otherContent?.classList.add("hidden");
          otherTrigger?.setAttribute("aria-expanded", "false");
          otherIcon?.classList.remove("rotate-180");
          otherItem
            .querySelector(".faq-icon")
            ?.classList.remove("bg-slice-500");
          otherItem
            .querySelector(".faq-icon")
            ?.classList.add("bg-cream-100", "dark:bg-dark-700");
          otherItem
            .querySelector(".faq-icon svg")
            ?.classList.remove("text-white");
          otherItem
            .querySelector(".faq-icon svg")
            ?.classList.add("text-dark-500", "dark:text-dark-400");
        }
      });

      if (isExpanded) {
        content?.classList.add("hidden");
        trigger.setAttribute("aria-expanded", "false");
        icon?.classList.remove("rotate-180");
        trigger.querySelector(".faq-icon")?.classList.remove("bg-slice-500");
        trigger
          .querySelector(".faq-icon")
          ?.classList.add("bg-cream-100", "dark:bg-dark-700");
        trigger.querySelector(".faq-icon svg")?.classList.remove("text-white");
        trigger
          .querySelector(".faq-icon svg")
          ?.classList.add("text-dark-500", "dark:text-dark-400");
      } else {
        content?.classList.remove("hidden");
        trigger.setAttribute("aria-expanded", "true");
        icon?.classList.add("rotate-180");
        trigger.querySelector(".faq-icon")?.classList.add("bg-slice-500");
        trigger
          .querySelector(".faq-icon")
          ?.classList.remove("bg-cream-100", "dark:bg-dark-700");
        trigger.querySelector(".faq-icon svg")?.classList.add("text-white");
        trigger
          .querySelector(".faq-icon svg")
          ?.classList.remove("text-dark-500", "dark:text-dark-400");
      }
    });
  });
</script>
