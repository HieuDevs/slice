---
import { Icon } from "astro-icon/components";

interface Props {
  formTitle: string;
  appNameLabel: string;
  appNamePlaceholder: string;
  descriptionLabel: string;
  descriptionPlaceholder: string;
  saveLabel: string;
  cancelLabel: string;
  toggleLockTitle: string;
}

const {
  formTitle,
  appNameLabel,
  appNamePlaceholder,
  descriptionLabel,
  descriptionPlaceholder,
  saveLabel,
  cancelLabel,
  toggleLockTitle,
} = Astro.props;
---

<div
  class="lg:col-span-4 opacity-0 animate-fade-in"
  style="animation-delay: 200ms"
>
  <div
    class="card p-6 lg:p-8 sticky top-6 border border-cream-200 dark:border-dark-700/50 bg-white/80 dark:bg-dark-800/80 backdrop-blur-sm"
  >
    <div class="flex items-center justify-between mb-6">
      <div class="flex items-center gap-3">
        <div
          class="w-10 h-10 rounded-xl bg-slice-100 dark:bg-slice-900/30 flex items-center justify-center"
        >
          <Icon
            name="heroicons:plus"
            class="w-5 h-5 text-slice-600 dark:text-slice-400"
          />
        </div>
        <h2
          id="form-title"
          class="text-xl md:text-2xl font-display font-bold text-dark-900 dark:text-cream-100"
        >
          {formTitle}
        </h2>
      </div>
      <button
        id="unlock-btn"
        class="flex p-2 bg-slice-500 hover:bg-slice-600 text-white rounded-xl font-semibold transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5 items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"
        onclick="toggleWorkshopLock()"
        title={toggleLockTitle}
      >
        <Icon
          id="unlock-icon-locked"
          name="heroicons:lock-closed"
          class="w-5 h-5 hidden"
        />
        <Icon
          id="unlock-icon-unlocked"
          name="heroicons:lock-open"
          class="w-5 h-5"
        />
      </button>
    </div>
    <form id="proposal-form" class="space-y-5">
      <input type="hidden" id="proposal-id" name="id" />
      <div>
        <label
          for="app_name"
          class="block text-sm font-semibold text-dark-700 dark:text-dark-200 mb-2"
        >
          {appNameLabel}
        </label>
        <input
          type="text"
          id="app_name"
          name="app_name"
          required
          class="w-full px-4 py-3 rounded-xl border-2 border-cream-300 dark:border-dark-700 bg-white dark:bg-dark-900 text-dark-900 dark:text-cream-100 focus:outline-none focus:ring-2 focus:ring-slice-500 dark:focus:ring-slice-400 focus:border-slice-500 dark:focus:border-slice-400 transition-all placeholder:text-dark-400 dark:placeholder:text-dark-500"
          placeholder={appNamePlaceholder}
        />
      </div>
      <div>
        <label
          for="description"
          class="block text-sm font-semibold text-dark-700 dark:text-dark-200 mb-2"
        >
          {descriptionLabel}
        </label>
        <textarea
          id="description"
          name="description"
          required
          rows="5"
          class="w-full px-4 py-3 rounded-xl border-2 border-cream-300 dark:border-dark-700 bg-white dark:bg-dark-900 text-dark-900 dark:text-cream-100 focus:outline-none focus:ring-2 focus:ring-slice-500 dark:focus:ring-slice-400 focus:border-slice-500 dark:focus:border-slice-400 transition-all resize-none placeholder:text-dark-400 dark:placeholder:text-dark-500"
          placeholder={descriptionPlaceholder}></textarea>
      </div>
      <div class="flex gap-3 pt-2">
        <button
          type="submit"
          id="submit-btn"
          class="flex-1 btn-primary justify-center"
        >
          {saveLabel}
        </button>
        <button
          type="button"
          id="cancel-btn"
          class="hidden px-6 py-3 rounded-full border-2 border-dark-200 dark:border-dark-700 text-dark-600 dark:text-dark-300 hover:bg-dark-50 dark:hover:bg-dark-800 transition-all font-medium"
        >
          {cancelLabel}
        </button>
      </div>
    </form>
  </div>
</div>
